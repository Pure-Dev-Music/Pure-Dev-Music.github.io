<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <title>KK Wedding – จัดตารางทีม</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <style>
      :root {
        --bg: #f4f5fb;
        --surface: #ffffff;
        --line: #e2e8f0;
        --primary: #6366f1;
        --primary-soft: rgba(99,102,241,0.09);
        --text: #0f172a;
        --muted: #64748b;
        --radius-lg: 20px;
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
        background: radial-gradient(circle at top, #fef3f2, #eff6ff 55%, #f4f5fb);
        min-height: 100vh;
      }
      header {
        backdrop-filter: blur(10px);
        background: rgba(255,255,255,0.9);
        border-bottom: 1px solid rgba(148,163,184,0.2);
        display: flex; justify-content: space-between; align-items: center;
        padding: 14px 26px 12px; position: sticky; top: 0; z-index: 100;
        flex-wrap: wrap; gap: 10px;
      }
      .brand { display: flex; gap: 10px; align-items: center; }
      .brand-circle {
        width: 30px; height: 30px; border-radius: 9999px;
        background: linear-gradient(135deg, #6366f1, #ec4899);
        display: grid; place-items: center; color: #fff; font-size: 13px; font-weight: 700;
      }
      .brand-title { font-weight: 700; color: var(--text); }

      .tabs { background: #e2e8f0; border-radius: 9999px; padding: 4px; display: flex; gap: 4px; flex-wrap: wrap; }
      .tab { border: none; background: transparent; padding: 6px 16px; border-radius: 9999px; font-size: 13px; color: #475569; cursor: pointer; }
      .tab.active { background: #fff; color: #0f172a; font-weight: 600; box-shadow: 0 1px 5px rgba(15,23,42,0.13); }

      .user-badge {
        background: #eef2ff;
        border: 1px solid rgba(99,102,241,0.15);
        padding: 4px 10px 4px 16px;
        border-radius: 9999px;
        font-size: 13px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .role-pill { background: #6366f1; color: #fff; border-radius: 9999px; font-size: 11px; padding: 2px 8px; text-transform: uppercase; }
      .user-badge .avatar {
        width: 22px; height: 22px; border-radius: 9999px;
        background: #e2e8f0; color:#334155; display:grid; place-items:center;
        font-weight: 700; font-size:11px;
      }
      .user-badge .name { font-weight: 600; }

      main { max-width: 1200px; margin: 16px auto; padding: 0 18px 32px; }

      .filters { display: flex; gap: 10px; margin-bottom: 14px; flex-wrap: wrap; }
      .input, .select {
        background: #fff; border: 1px solid rgba(99,102,241,0.09);
        border-radius: 9999px; padding: 6px 12px 6px 14px;
        font-size: 13px; color: #0f172a; outline: none;
      }
      .select {
        appearance: none;
        background-image: linear-gradient(45deg, transparent 50%, #94a3b8 50%), linear-gradient(135deg, #94a3b8 50%, transparent 50%);
        background-position: calc(100% - 12px) calc(50% - 3px), calc(100% - 7px) calc(50% - 3px);
        background-size: 5px 5px, 5px 5px; background-repeat: no-repeat; padding-right: 24px;
      }

      .card-table { background: #fff; border-radius: 18px; border: 1px solid rgba(148,163,184,0.25); overflow: hidden; box-shadow: 0 10px 30px rgba(15,23,42,0.03); }
      .table-wrapper { width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
      table { width: 100%; border-collapse: collapse; min-width: 700px; }
      thead { background: #f8fafc; position: sticky; top: 0; z-index: 1; }
      th, td { padding: 10px 16px; font-size: 13px; border-bottom: 1px solid #eef2f7; text-align: left; white-space: nowrap; }
      th { color: #475569; font-weight: 600; letter-spacing: .01em; }
      tr:hover td { background: rgba(99,102,241,0.03); }
      .badge { display: inline-block; background: #f1f5f9; border-radius: 9999px; padding: 2px 6px; margin: 1px; font-size: 13px; white-space: nowrap; }
      .money-admin { font-weight: 600; color: #15803d; }
      .money-cell.hidden { display: none; }

      /* แถวงานที่ผ่านไปแล้ว */
      .row-past td { background: #ecfdf5 !important; }
      .row-past:hover td { background: #d1fae5 !important; }

      .login-wrap { max-width: 420px; margin: 64px auto; padding: 28px; border: 1px solid rgba(148,163,184,0.25);
        border-radius: 16px; background: #fff; text-align: center; box-shadow: 0 8px 24px rgba(15,23,42,.06); }
      .login-title { margin: 0 0 10px; font-size: 20px; }
      .login-desc { color: #475569; margin-bottom: 18px; font-size: 13px; }

      @media (max-width: 768px) {
        main { padding: 0.5rem; }
        .filters { flex-direction: column; align-items: stretch; }
        table { font-size: 14px; }
        th, td { padding: 6px 8px; }
      }
    </style>
  </head>

  <body>
    <header>
      <div class="brand">
        <div class="brand-circle">KK</div>
        <div class="brand-title">KK Wedding – จัดตารางทีม</div>
      </div>
      <div class="tabs">
        <button class="tab active" data-tab="all">ตารางงาน</button>
        <button class="tab" data-tab="mine">งานของฉัน</button>
        <button class="tab" data-tab="report">สรุป / จ่ายเงิน</button>
      </div>
      <div class="user-badge" id="userBox">ยังไม่ได้ล็อกอิน</div>
    </header>

    <main id="loginView" style="display:none">
      <div class="login-wrap">
        <h3 class="login-title">เข้าสู่ระบบ</h3>
        <p class="login-desc">เข้าสู่ระบบด้วยบัญชี Google เพื่อดูตารางงานของทีม</p>
        <div id="g_id_signin"></div>
      </div>
    </main>

    <main id="appView" style="display:none">
      <div class="filters">
        <input type="date" id="dateFilter" class="input" />
        <input type="text" id="searchFilter" class="input" placeholder="ค้นหาชื่อคู่บ่าวสาว / สถานที่..." />
        <select id="memberFilter" class="select">
          <option value="">-- ทีมรันคิว --</option>
        </select>
      </div>

      <div class="card-table">
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>วันที่</th>
                <th>เวลา</th>
                <th>คู่บ่าวสาว</th>
                <th>สถานที่</th>
                <th>นายพิธี</th>
                <th>ทีมรันคิว</th>
                <th>ลูกค้า</th>
                <th id="thMoney">ค่าทีม</th>
              </tr>
            </thead>
            <tbody id="jobsBody">
              <tr><td colspan="8">โปรดล็อกอิน...</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <script>
      // ... (ใช้ script เดิมของคุณได้เลย)
    </script>
  </body>
</html>
